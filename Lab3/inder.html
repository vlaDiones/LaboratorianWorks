<!DOCTYPE html>
<html lang="uk">
    <head>
        <meta charset="UTF-8">
        <title>Generators and Context</title>
    </head>
    <body>

        <h2>Завдання 1: Генератор випадкових чисел</h2>
        <button id="next">Next number</button>
        <div id="out" style="font-size: 1.5em; margin-top: 10px;"></div>
        <hr>

        <h2>Завдання 2: Генератор паролів</h2>
        <p>Відкрийте консоль і дотримуйтесь інструкцій у prompt().</p>
        <hr>

        <h2>Завдання 3: Генератор діалогів (Чат-бот)</h2>
        <p>Дотримуйтесь інструкцій у prompt().</p>
        <hr>

        <h2>Завдання 4: Втрата контексту 'this'</h2>
        <button id="hello">Say</button>
        <hr>


        <script>
            function* randomGenerator(min, max) {
                while (true) {
                    const randomNum = Math.floor(Math.random() * (max - min + 1)) + min;
                    yield randomNum;
                }
            }

            const min = parseInt(prompt("Завдання 1: Введіть MIN число:"));
            const max = parseInt(prompt("Завдання 1: Введіть MAX число:"));

            const generator = randomGenerator(min, max);

            const nextButton = document.getElementById('next');
            const outDiv = document.getElementById('out');

            nextButton.addEventListener('click', () => {
                outDiv.textContent = generator.next().value;
            });
        </script>

        <script>
            function* passwordGenerator() {
                let password = '';
                while (true) {
                    const char = yield;

                    if (char === 'done') {
                        break;
                    }

                    if (char) {
                        password += char;
                    }
                }
                return password;
            }

            const passGen = passwordGenerator();
            passGen.next();

            let input = prompt("Завдання 2: Введіть символ (або 'done'):");
            let result;

            while (input !== 'done') {
                result = passGen.next(input);
                input = prompt("Завдання 2: Введіть символ (або 'done'):");
            }

            result = passGen.next('done');

            alert("Ваш пароль: " + result.value);
        </script>

        <script>
            function* chatBot() {
                const name = yield "Hi! What is your name?";
                const feeling = yield `Nice to meet you, ${name}! How are you?`;
                return `Goodbye, ${name}!`;
            }

            const bot = chatBot();
            let currentStep = bot.next();

            while (!currentStep.done) {
                let answer = prompt(currentStep.value);
                currentStep = bot.next(answer);
            }

            alert(currentStep.value);
        </script>

        <script>
            const userName = prompt("Завдання 4: Введіть ваше ім'я:");

            const user = {
                name: userName,
                say() {
                    alert("Hello, " + this.name);
                }
            };

            const helloButton = document.getElementById('hello');


            helloButton.addEventListener('click', () => user.say());

        </script>

    </body>
</html>

